<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0-1</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"
    integrity="sha512-uaz5GpnQoE6t5echKlX8P52czvsIGgLPcvlzfvRubLZ1Hp8JemUDnbUiAahbVtPb+jUVrNETuXvAhDDF/N3M4w=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script defer src="https://unpkg.com/p5.collide2d"></script>
    <link rel="stylesheet" href="../game.css" type="text/css">
</head>

<body>
    <p id="storyBox"></p>
    <p id="ch01s"></p>
    <p id="tri"></p>
    <button onclick="clicked()" id="click"></button>

    <script>
       let w = window.innerWidth
       let h = window.innerHeight
       let bg
       let ch
       let x

       let storyLines = [
        "In the near future, the Phantom Live movement was born anew from the incredible saturation of hip-hop culture.",
        "Rappers have accessories containing a metallic substance called Phantom Metal.",
        "Through chemical reactions with their own DNA, they create illusions linked to their emotions, driving young people wild with spectacular stage shows.",
        "Underneath the stage, however, the rappers using the phantom metal are suffering from it's side effects which was the traumatic illusions."
    ]

        //继续故事
        let storyIndex = 0

        x =localStorage.getItem('money')
        ch=localStorage.getItem('ch')
        console.log(x)

        function clicked() {
            if (storyIndex < storyLines.length) {
                document.getElementById('ch01s').innerHTML = storyLines[storyIndex]
                storyIndex++
            } 

            else {
                pass()
            }
        }

        function pass() {
            var x1
            if (ch < 1) {
                ch++
                x1 = parseInt(x)
                x = (x1 + 5).toString()
                console.log(x)
                console.log(x1)
                localStorage.setItem('money', x.toString())
                localStorage.setItem('ch', ch.toString())
            } 
            else {
                location.href = "ch0.html"
            }
            }

        //背景
       function preload() {
            bg = loadImage("../ch01.png")
        }

        //必要
       function setup() {
           createCanvas(w, h)

       }

       //必要
       function draw() {
            background(bg)
       }

   </script>
</body>
</html>
